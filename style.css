/* style.css (updated)
   - Ditambah styling untuk video section music player and quiz.
   - Perubahan lain tetap sama seperti sebelumnya.
*/

/* Reset ringan */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color: #2b2b2b; background: #fffaf6; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

/* Variables */
:root{
  --bg: #fffaf6;
  --accent1: #ff8674;
  --accent2: #ffb4a2;
  --muted: #8b6a64;
  --shadow-dark: 0 18px 34px rgba(8,8,8,0.42);
  --shadow-soft: 0 24px 46px rgba(36,28,24,0.08);
  --timeline-bg: transparent;
  --frame-border: rgba(60,40,36,0.06);
  --card-bg-start: rgba(255,250,246,1);
  --card-bg-end: rgba(255,236,230,1);
  --card-active-end: rgba(255,228,220,1);
  --video-outline: rgba(30,144,255,0.95);
}

/* Container */
.container { width: 92%; max-width: 1100px; margin: 0 auto; }

/* Pages */
.pages { height: 100svh; height: 100vh; overflow-y: auto; scroll-snap-type: y mandatory; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; background: var(--bg); }
.page { scroll-snap-align: start; min-height: 100svh; min-height: 100vh; display: block; padding: 2.2rem 0; position: relative; transition: opacity .25s ease, transform .25s ease; opacity: 1; transform: none; pointer-events: auto; }
.js .page { opacity: 0.06; transform: translateY(8px); pointer-events: none; }
.js .page.is-active { opacity: 1; transform: translateY(0); pointer-events: auto; }

/* HERO */
.hero { display:flex; align-items:center; justify-content:center; text-align:center; position:relative; padding:4rem 0; background-size:cover; background-position:center; }
.hero-content { position: relative; z-index:2; width:100%; max-width:960px; padding:1rem; }
.hero-title { font-weight:800; color:#3b2f2f; font-size: clamp(2.1rem, 5.6vw, 4rem); line-height:1.03; margin-bottom:.6rem; }
.hero-sub { color:var(--muted); font-size:clamp(0.95rem,1.8vw,1.15rem); margin-bottom:1.2rem; }

/* Buttons */
.btn { display:inline-flex; align-items:center; gap:.6rem; border:none; padding:.65rem 1rem; border-radius:10px; cursor:pointer; font-weight:700; font-size:.95rem; transition:transform .12s, box-shadow .12s, opacity .12s; }
.btn.primary { color:#fff; background:linear-gradient(90deg,var(--accent2),var(--accent1)); box-shadow:0 8px 22px rgba(255,134,116,0.14); }
.btn.ghost { background:rgba(255,255,255,0.92); color:#3b2f2f; border:1px solid rgba(60,40,30,0.06); box-shadow:0 4px 10px rgba(60,40,30,0.04); }

/* Section title */
.section-title { font-size:1.15rem; margin-bottom:1rem; color:#5a3b36; font-weight:700; }

/* TIMELINE (moments) */
.timeline {
  display:flex;
  gap:2rem;
  padding:1.8rem 0;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling:touch;
  align-items:center;
  background:linear-gradient(120deg, rgba(255,255,255,0.0), var(--timeline-bg) 18%);
  border-radius:12px;
  padding-left:12px;
  padding-right:12px;
}
.timeline::-webkit-scrollbar { height:10px; }
.timeline::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.08); border-radius:10px; }

/* Card base */
.card {
  position:relative;
  flex:0 0 36%;
  min-width:320px;
  max-width:420px;
  scroll-snap-align:center;
  border-radius:14px;
  padding:18px;
  box-shadow: 0 18px 34px rgba(40,30,30,0.08);
  transition: transform .32s cubic-bezier(.22,.9,.2,1), box-shadow .32s, background .32s, color .32s;
  display:block;
  overflow:hidden;
  background: linear-gradient(180deg, var(--card-bg-start) 0%, var(--card-bg-end) 100%);
  color: #3b2f2f;
  border: 8px solid var(--frame-border);
}
.card.is-slide-active { transform: translateY(-4px) scale(1.02); box-shadow: 0 28px 48px rgba(40,30,30,0.12); }
.card.opened {
  background: linear-gradient(180deg, var(--card-bg-start) 0%, var(--card-active-end) 100%);
  color: #3b2f2f;
  box-shadow: 0 30px 60px rgba(40,30,30,0.12);
  transform: translateY(-6px) scale(1.02);
  border: 8px solid rgba(60,40,36,0.08);
}

/* Image container */
.moment-media { width:100%; display:flex; justify-content:center; align-items:center; position:relative; }
.moment-media img {
  width: calc(100% - 20px);
  max-width: 360px;
  height: auto;
  aspect-ratio: 1 / 1;
  object-fit: cover;
  border-radius: 10px;
  display: block;
  transition: transform .28s ease, filter .28s ease, opacity .28s ease;
  box-shadow: 0 6px 18px rgba(0,0,0,0.18);
}
.moment-media video { width: calc(100% - 20px); max-width: 360px; height: auto; border-radius: 10px; display: block; }
@media (min-width:1100px) {
  .card { flex:0 0 28%; max-width:420px; min-width:360px; }
  .moment-media img { max-width:420px; aspect-ratio:1/1; }
  .moment-media video { max-width:420px; aspect-ratio:1/1; }
}

/* Moment overlay */
.moment-overlay {
  position:absolute;
  inset:0;
  border-radius:inherit;
  display:flex;
  flex-direction:column;
  justify-content:flex-start;
  gap:0.6rem;
  align-items:flex-start;
  padding:14px;
  background: linear-gradient(180deg, rgba(12,12,12,0.48), rgba(12,12,12,0.26));
  z-index:40;
  color:#fff;
  transition: opacity .28s cubic-bezier(.2,.9,.25,1), transform .28s cubic-bezier(.2,.9,.25,1);
  opacity:1;
  pointer-events:auto;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
  text-shadow: 0 2px 8px rgba(0,0,0,0.6);
}
.moment-overlay .overlay-title { font-size:1.15rem; font-weight:800; color:#fff; margin-bottom:4px; }
.moment-overlay .overlay-by { font-size:.85rem; color:rgba(255,255,255,0.9); margin-bottom:8px; }
.moment-overlay .overlay-desc { font-size:.92rem; color:rgba(255,255,255,0.92); white-space:pre-line; overflow:hidden; max-height: calc(100% - 72px); }

.card.overlay-on .moment-media img { filter: brightness(0.56) contrast(0.95) !important; transform: scale(1.01) !important; }
.card.overlay-hidden .moment-media img, .card.opened .moment-media img { filter: none !important; transform: none !important; }
.card.overlay-hidden .moment-overlay { opacity:0; transform: translateY(6px); pointer-events:none; }
.card.overlay-on .moment-title, .card.overlay-on .moment-date, .card.overlay-on .moment-desc { display: none; }

.audio-controls { display:flex; gap:.6rem; align-items:center; flex-wrap:wrap; margin-top:.4rem; }
.play-btn { display: none !important; }
.audio-status, .audio-duration { color: inherit; font-weight: 700; }
.card.opened .moment-title, .card.opened .moment-date, .card.opened .moment-desc { opacity:0; height:0; overflow:hidden; margin:0; padding:0; }

/* Video card stability */
.video-card .moment-media {
  min-height: 360px;
  max-height: 360px;
  height: 360px;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
  overflow: hidden;
  background: #000;
}
.video-card .moment-media img, .video-card .moment-media video {
  width: calc(100% - 20px);
  height: 100%;
  object-fit: contain;
  border-radius: 10px;
  display:block;
  background: #000;
  touch-action: manipulation;
  -webkit-user-drag: none;
  user-select: none;
}
@media (max-width: 540px) {
  .video-card .moment-media { min-height: 240px; max-height: 240px; height: 240px; }
}

/* Video carousel (swipe-only) */
/* (Removed heavy carousel styling for video-messages; section now shows quiz/drive link) */

/* ================================================================
   VIDEO MUSIC PLAYER STYLES (dipertahankan untuk player di bawah gallery)
   ================================================================ */
.video-music-player {
  width: 100%;
  max-width: 820px;
  background: linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,245,240,0.96));
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 10px 30px rgba(36,28,24,0.06);
  display:flex;
  gap:12px;
  align-items:center;
  justify-content: flex-start;
  margin-top: 18px;
  border: 1px solid rgba(60,40,36,0.04);
}
.video-music-player .vm-play { background: transparent; border: none; font-weight:800; font-size:14px; padding:8px 10px; border-radius:8px; cursor:pointer; }
.video-music-player .vm-play.playing { color: var(--accent1); }
.video-music-player .vm-volume { width: 140px; }
.video-music-player .vm-mute { background: transparent; border: none; cursor: pointer; padding:6px; border-radius:8px; }
.video-music-player .vm-title { font-weight:700; color:#3b2f2f; margin-right:8px; min-width:140px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.video-music-player input[type="file"] { display:inline-block; font-size:13px; }

@media (max-width: 700px) {
  .video-music-player { flex-direction: column; align-items:flex-start; gap:8px; padding:10px; }
  .video-music-player .vm-volume { width: 100%; }
}

/* ================================================================
   VIDEO MESSAGES QUIZ STYLES (new)
   ================================================================ */
.sr-only {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap;
  border: 0; padding: 0; margin: -1px;
}

.video-intro { margin-bottom: 8px; color: #4a2f2e; }

.video-quiz { margin-top: 12px; display:flex; flex-direction:column; gap:10px; align-items:flex-start; max-width:720px; }
.video-quiz .quiz-question { font-weight:700; color:#3b2f2f; font-size:1rem; margin-bottom:6px; }
.quiz-form { display:flex; gap:10px; width:100%; align-items:center; }
.quiz-form input[type="text"] { flex:1 1 auto; padding:10px 12px; border-radius:8px; border:1px solid rgba(60,40,36,0.06); background: #fff; color:#3b2f2f; font-size:0.98rem; }
.quiz-form button { flex:0 0 auto; }

.quiz-feedback { min-height: 1.2em; font-weight:700; font-size:0.95rem; }
.quiz-feedback.correct { color: green; }
.quiz-feedback.wrong { color: #c0392b; }
.quiz-feedback.warning { color: #b07a2f; }

/* ================================================================
   Message cards override (unchanged)
   ================================================================ */
.message.card {
  background: #fffaf5;
  color: #2b2b2b;
  border: none;
  box-shadow: 0 6px 18px rgba(60,40,30,0.04);
  padding: 16px;
  border-radius: 12px;
  min-height: auto;
  display: block;
}
.message .msg-author { color: #3b2f2f; font-weight: 800; margin-bottom: 0.5rem; font-size: 1.05rem; }
.message .msg-text { color: #4a2f2e; line-height: 1.55; white-space: pre-line; font-size: 0.95rem; }
.messages-grid { display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); max-height: calc(60vh); overflow-y: auto; padding-right: 8px; padding-bottom: 6px; }
.message.card:focus { outline: 3px solid rgba(255,140,110,0.12); outline-offset: 2px; }

/* Rest preserved: gallery, modal, dots, closing section */
.gallery-grid { display:grid; gap:.6rem; grid-template-columns: repeat(auto-fit, minmax(140px,1fr)); max-height: calc(100svh - 210px); overflow-y:auto; padding-right:8px; }
.gallery-item img { width:100%; height:120px; object-fit:cover; border-radius:10px; cursor:pointer; transition: transform .16s ease; }
.gallery-item img:hover { transform: scale(1.03); }
.modal { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.6); padding:1rem; z-index:9999; }
.modal[aria-hidden="false"] { display:flex; }
.modal-content { background:#fff; border-radius:12px; padding:1rem; max-width:920px; width:100%; max-height:90vh; overflow:auto; position:relative; }
.modal-content img { width:100%; height:auto; border-radius:8px; display:block; margin-bottom:.6rem; }
.modal-close { position:absolute; top: .6rem; right: .6rem; background:transparent; font-size:1.6rem; border:none; cursor:pointer; }
.dots-nav { position: fixed; right: 14px; top: 50%; transform: translateY(-50%); display:flex; flex-direction:column; gap:10px; z-index:1100; }
.dot { width:12px; height:12px; border-radius:50%; background:rgba(255,255,255,0.7); border:2px solid rgba(74,47,46,0.12); cursor:pointer; transition: transform .15s ease, background .15s; }
.dot.active { transform: scale(1.4); background: linear-gradient(90deg,var(--accent2),var(--accent1)); }
:focus { outline:none; }
button:focus { box-shadow:0 0 0 3px rgba(255,140,110,0.14); border-radius:8px; }
.closing { display: flex; align-items: center; justify-content: center; text-align: center; padding: 4rem 1rem; min-height: calc(100vh - 2.2rem); box-sizing: border-box; }
.closing .container { max-width: 820px; width: 100%; padding: 0 1rem; }
.closing h2 { margin: 0 0 .4rem; font-size: 1.6rem; color: #3b2f2f; font-weight: 800; }
.closing .closing-quote { margin: .4rem 0 1.2rem; font-size: 1.05rem; color: #6b4a45; line-height: 1.5; }
.closing h1.closing-quote { margin: 0; font-size: 1.8rem; color: #3b2f2f; font-weight: 800; }
@media (max-width: 700px) {
  .closing { padding: 2.4rem 1rem; min-height: auto; }
  .closing h2 { font-size: 1.35rem; }
  .closing .closing-quote { font-size: 1rem; }
  .closing h1.closing-quote { font-size: 1.4rem; }
}

/* ================================================================
   VIDEO FULLSCREEN SUPPORT (SAFE – kept for gallery videos)
   ================================================================ */

/* Pastikan video bisa di-tap & fullscreen */
video {
  cursor: pointer;
  max-width: 100%;
  max-height: 100%;
}

/* Fullscreen native (Chrome, Edge, Firefox, Safari) */
video:fullscreen {
  width: 100vw !important;
  height: 100vh !important;
  object-fit: contain !important;
  background: #000 !important;
  z-index: 2147483647 !important;
}

video:-webkit-full-screen {
  width: 100vw !important;
  height: 100vh !important;
  object-fit: contain !important;
  background: #000 !important;
}

/* Fullscreen dari dalam modal */
.modal-content video:fullscreen,
.modal-content video:-webkit-full-screen {
  border-radius: 0 !important;
  margin: 0 !important;
}

/* Cegah layout lompat saat fullscreen */
body:has(video:fullscreen),
body:has(video:-webkit-full-screen) {
  overflow: hidden;
}

/* Mobile safety (tap tidak ke-scroll) */
.moment-media video,
.gallery-item video,
.modal-content video {
  touch-action: manipulation;
}

/* Hilangkan outline aneh saat fullscreen */
video:focus {
  outline: none;
}
/* === FIX VIDEO GRID DISPLAY (same as image) === */
.gallery-item video {
  width: 100%;
  height: 120px;
  object-fit: cover;          /* ⬅️ ini kuncinya */
  border-radius: 10px;
  display: block;
  cursor: pointer;
  background: #000;
}

/* optional play hint */
.gallery-item video::part(control-bar) {
  opacity: 0;
}